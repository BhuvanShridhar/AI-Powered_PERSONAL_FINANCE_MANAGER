<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Finance Tracker with Google Pay</title>

    <!-- Fonts and Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

    <style>
        :root {
            --primary-color: #2a5298;
            --secondary-color: #1e3c72;
            --accent-color: #FFD700;
            --light-bg: #fff;
            --dark-bg: #121212;
            --text-light: #fff;
            --text-dark: #333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: var(--dark-bg);
            color: var(--text-light);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 90%;
            max-width: 1300px;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--accent-color);
            text-transform: uppercase;
        }

        .card-container,
        .form-container {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .card,
        .form-item {
            background: linear-gradient(145deg, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
            padding: 25px;
            width: 30%;
            margin: 10px;
            color: var(--text-light);
            position: relative;
            transition: transform 0.3s ease;
        }

        .card:hover,
        .form-item:hover {
            transform: translateY(-10px);
        }

        .card-title,
        .form-item label {
            font-size: 1.3rem;
            font-weight: 500;
            margin-bottom: 15px;
        }

        .card-value {
            font-size: 2.8rem;
            font-weight: 700;
        }

        .button {
            background-color: var(--accent-color);
            color: var(--primary-color);
            padding: 12px 25px;
            border-radius: 5px;
            font-size: 1rem;
            text-transform: uppercase;
            border: none;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .button:hover {
            transform: scale(1.05);
        }

        .form-item input {
            padding: 10px;
            border-radius: 5px;
            border: none;
            width: 100%;
            margin-bottom: 10px;
        }

        .goal-container {
            text-align: center;
            margin-top: 30px;
        }

        .goal-container span {
            font-size: 1.5rem;
        }

        .chart-container {
            text-align: center;
            margin-top: 20px;
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 15px;
        }

        .chart-wrapper {
            width: 100%;
            margin-bottom: 15px;
        }

        .small-chart {
            height: 200px;
        }

        @media (max-width: 992px) {
            .card,
            .form-item {
                width: 45%;
            }

            .chart-wrapper {
                width: 100%;
            }
        }

        @media (max-width: 768px) {
            .card,
            .form-item {
                width: 100%;
            }
        }

        #loginPage {
            display: block;
        }

        #dashboard {
            display: none;
        }

        #loginMessage {
            color: #d9534f;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container" id="loginPage">
        <h1>Login</h1>
        <form id="loginForm" style="display: flex; flex-direction: column; align-items: center;">
            <input type="text" id="username" placeholder="Username" required />
            <input type="password" id="password" placeholder="Password" required />
            <button type="submit" class="button">Login</button>
        </form>
        <p id="loginMessage"></p>
    </div>

    <div class="container" id="dashboard">
        <h1>Personal Finance Dashboard</h1>

        <!-- Cards Section -->
        <div class="card-container">
            <div class="card">
                <i class="fas fa-wallet"></i>
                <div class="card-title">Total Expenses</div>
                <div class="card-value" id="total-expense">$0</div>
            </div>
            <div class="card">
                <i class="fas fa-coins"></i>
                <div class="card-title">Total Income</div>
                <div class="card-value" id="total-income">$0</div>
            </div>
            <div class="card">
                <i class="fas fa-dollar-sign"></i>
                <div class="card-title">Balance</div>
                <div class="card-value" id="balance">$0</div>
            </div>
        </div>

        <!-- Forms Section -->
        <div class="form-container">
            <div class="form-item">
                <label for="expense-amount">Add Expense</label>
                <input type="number" id="expense-amount" placeholder="Expense amount">
                <button class="button" id="add-expense-btn">Add Expense</button>
            </div>
            <div class="form-item">
                <label for="income-amount">Add Income</label>
                <input type="number" id="income-amount" placeholder="Income amount">
                <button class="button" id="add-income-btn">Add Income</button>
            </div>
            <div class="form-item">
                <label for="goal">Set Savings Goal</label>
                <input type="number" id="goal" placeholder="Enter your savings goal">
                <button class="button" id="add-goal-btn">Set Goal</button>
            </div>
        </div>

        <!-- Goal Section -->
        <div class="goal-container">
            <h2>Goal Progress</h2>
            <span>Goal: <span id="goal-amount">$0</span></span><br>
            <span>Progress: <span id="goal-progress">0%</span></span>
        </div>

        <!-- Google Pay Section -->
        <div class="form-item" id="google-pay-button" style="text-align: center; margin-top: 20px;"></div>

        <!-- Small Pie Chart Section -->
        <div class="chart-container">
            <h3>Income vs. Expenses</h3>
            <div class="chart-wrapper">
                <canvas id="financePieChart" class="small-chart"></canvas>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://pay.google.com/gp/p/js/pay.js" async></script>
    <script>
        let expenses = [];
        let income = [];
        let goal = 0;
        let financePieChart;

        // Google Pay setup
        function setupGooglePay() {
            const paymentsClient = new google.payments.api.PaymentsClient({ environment: 'TEST' });
            const button = paymentsClient.createButton({ onClick: onGooglePayButtonClicked });
            document.getElementById('google-pay-button').appendChild(button);
        }

        function onGooglePayButtonClicked() {
            const paymentDataRequest = getPaymentDataRequest();
            paymentsClient.loadPaymentData(paymentDataRequest)
                .then(function (paymentData) {
                    // Process the payment data here
                    console.log(paymentData);
                })
                .catch(function (err) {
                    console.error('Error loading payment data:', err);
                });
        }

        function getPaymentDataRequest() {
            return {
                apiVersion: 2,
                apiVersionMinor: 0,
                merchantId: 'YOUR_MERCHANT_ID', // Replace with your merchant ID
                transactionInfo: {
                    totalPriceStatus: 'FINAL',
                    totalPrice: '10.00', // replace with dynamic value
                    currencyCode: 'USD',
                },
                allowedPaymentMethods: [{
                    type: 'CARD',
                    tokenizationSpecification: {
                        type: 'PAYMENT_GATEWAY',
                        parameters: {
                            gateway: 'example', // Replace with your payment gateway
                            merchantId: 'exampleMerchantId' // Replace with your merchant ID
                        }
                    },
                    parameters: {
                        allowedAuthMethods: ['PAN_ONLY', 'CRYPTOGRAM_3DS'],
                        allowedCardNetworks: ['MASTERCARD', 'VISA'],
                    },
                }],
            };
        }

        // Update financial data on the dashboard
        function updateDashboard() {
            const totalExpense = expenses.reduce((sum, expense) => sum + expense, 0);
            const totalIncomeValue = income.reduce((sum, inc) => sum + inc, 0);
            const balanceValue = totalIncomeValue - totalExpense;

            document.getElementById('total-expense').innerText = `$${totalExpense}`;
            document.getElementById('total-income').innerText = `$${totalIncomeValue}`;
            document.getElementById('balance').innerText = `$${balanceValue}`;
            document.getElementById('goal-amount').innerText = `$${goal}`;
            updateGoalProgress();
            updateChart();
        }

        function updateGoalProgress() {
            const totalSavings = income.reduce((sum, inc) => sum + inc, 0) - expenses.reduce((sum, expense) => sum + expense, 0);
            const progress = (totalSavings / goal) * 100;
            document.getElementById('goal-progress').innerText = `${Math.min(Math.max(progress, 0), 100).toFixed(2)}%`;
        }

        function updateChart() {
            const totalExpense = expenses.reduce((sum, expense) => sum + expense, 0);
            const totalIncomeValue = income.reduce((sum, inc) => sum + inc, 0);

            if (financePieChart) {
                financePieChart.destroy();
            }

            const ctx = document.getElementById('financePieChart').getContext('2d');
            financePieChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Income', 'Expenses'],
                    datasets: [{
                        data: [totalIncomeValue, totalExpense],
                        backgroundColor: ['#36a2eb', '#ff6384'],
                    }]
                },
                options: {
                    responsive: true,
                }
            });
        }

        // Login Functionality
        document.getElementById('loginForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Simulated login (replace with real authentication logic)
            if (username === 'user' && password === 'pass') {
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                setupGooglePay();
                updateDashboard();
            } else {
                document.getElementById('loginMessage').innerText = 'Invalid username or password';
            }
        });

        // Add Expense
        document.getElementById('add-expense-btn').addEventListener('click', function () {
            const amount = parseFloat(document.getElementById('expense-amount').value);
            if (!isNaN(amount)) {
                expenses.push(amount);
                updateDashboard();
            }
            document.getElementById('expense-amount').value = '';
        });

        // Add Income
        document.getElementById('add-income-btn').addEventListener('click', function () {
            const amount = parseFloat(document.getElementById('income-amount').value);
            if (!isNaN(amount)) {
                income.push(amount);
                updateDashboard();
            }
            document.getElementById('income-amount').value = '';
        });

        // Set Savings Goal
        document.getElementById('add-goal-btn').addEventListener('click', function () {
            const amount = parseFloat(document.getElementById('goal').value);
            if (!isNaN(amount)) {
                goal = amount;
                updateDashboard();
            }
            document.getElementById('goal').value = '';
        });

        // Initial Setup
        window.onload = function () {
            setupGooglePay();
        };
    </script>
    <script>
    window.embeddedChatbotConfig = {
    chatbotId: "rJXBO4PXa7Rzx9Q_gA-pW",
    domain: "www.chatbase.co"
    }
    </script>
    
    <script
    src="https://www.chatbase.co/embed.min.js"
    chatbotId="rJXBO4PXa7Rzx9Q_gA-pW"
    domain="www.chatbase.co"
    defer>
    </script>
</body>
</html>
